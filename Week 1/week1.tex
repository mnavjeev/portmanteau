\section{Math Review}%
\label{sec:math-review}

\subsection{Vector Spaces and Norms}%

\begin{definition}[Vector Space]
	\label{def:vector-space}
	A vector space \(X\) is a set of elements with two operations, addition (+) and scalar multiplication  \((\cdot)\), and an additive identity \(\mathbf{0} \in X\) satisfying:
	 \begin{enumerate}
		 \item \( x + y = y+ x\) 
		 \item \((x+y)+z = x + (y+z)\)
		 \item \( \mathbf{0} + x = x,\, \forall x \in X\)
		 \item \(\alpha(x+y) = \alpha x + \alpha y\)
		 \item \((\alpha + \beta)x = \alpha x + \beta x\)
		 \item \((\alpha\beta)x = \alpha(\beta)x\)
		 \item \(0x = \mathbf{0}\) and  \(1x = x\) 
	\end{enumerate}
\end{definition}
Examples include \(\SR^K\) and  \(\calC[a,b]\), the set of all continuous functions from \([a,b] \to \SR\).

\begin{definition}[Norm]
	\label{def:norm}
	Let \(X\) be a vector space.  A norm is a functional,  \(\left\|\cdot\right\|:X \to \SR\) satisfying
	\begin{enumerate}
		\item \(\left\|x\right\|\geq 0,\,\forall x \in X\) and \(\|x\|=0\) if and only if \(x = \mathbf{0}\).
		\item \(\left\|x+y\right\|\leq \|x\| + \|y\|\) \. (Triangle Inequality) 
		\item \(\|\alpha x\| = |\alpha|\|x\|,\,\forall \alpha \in \SR, x \in X\)
	\end{enumerate}
\end{definition}
Examples of norms include the \(\ell^p\) norms on  \(\SR^K\) or the sup-norm on the space of all bounded, real valued, functions. On \(\SR^K\) all norms are equivalent, which is to say that for any two norms  \(\|\cdot\|_1, \|\cdot\|_2\) there are constants \(C_1, C_2\) such that  \(C_1\|\cdot\|_2 \leq \|\cdot\|_1 \leq C_2 \|\cdot\|_2\). However, this is not generally the case for functional vector spaces. For example on \(\calC[a,b]\) there is no constant \(c\) such that, for all \(f\):
 \[
	 \sup_{x\in[a,b]}f(x) = \|f\|_\infty \leq c \|f\|_2 = \left(\int_{a}^{b} f^2(x) dx\right)^{1/2}
.\] 

Closely related to a norm is the concept of a metric, which is a way of defining a distance on a space. 
\begin{definition}[Metric]
	\label{def:metric}
	Let \(X\) be a vector space. A metric (or distance metric) on \(X\) is a functional  \(d(x,y): X \times X \to \SR\) satisfying:
	 \begin{enumerate}
		 \item \(d(x,y)\geq 0,\forall x,y\) and \(d(x,y) = 0 \iff x = y\)
		 \item \(d(x,y) = d(y,x)\)
		 \item \(d(x,y) \leq d(x,z) + d(z,y),\,\forall x,y,z\)
	\end{enumerate}
\end{definition}

It is straightforward to verify that, given a norm on a vector space \(X\), we can generate a valid metric:
 \[
	 d_{\|\cdot\|}(x,y) := \|x-y\|
.\]

We return to these concepts when discussing a topology. 

\subsection{Topology and Continuity}%
\label{subsec:topology}

A topology is a general structure under which we can discuss concepts such as convergence and continuity. We can start with a general structure and then discuss spaces where the topology is generated by a metric (or norm).

\begin{definition}[Topology]
	\label{def:topology}
	A topology on a set \(X\) is a collection of subsets of X, \(\boldsymbol{\tau} \subset 2^X\) satisfying:
	\begin{enumerate}
		\item \(\emptyset, X \in \boldsymbol{\tau}\).
		\item \(\boldsymbol{\tau}\) is closed under finite intersections, if \(\left\{A_k\right\}_{k=1}^K \in \boldsymbol{\tau}\) then \(\bigcap_{k=1}^K A_k \in \boldsymbol{\tau}\).
		\item \(\boldsymbol{\tau}\) is closed under arbitrary unions, if \(\left\{A_k\right\}_k \in \boldsymbol{\tau}\) then \(\bigcup_k A_k \in \boldsymbol{\tau}\).
	\end{enumerate}
	The elements of \(A\in\boldsymbol\tau\) are called open sets. A set, \(B\), is closed if it's complement is in \(\boldsymbol{\tau}\), \(B^c \in \boldsymbol{\tau}\).
\end{definition}
Some simple examples include the trivial topology, \(\boldsymbol{\tau} = \left\{X, \emptyset\right\}\) and the discrete topology  \(\boldsymbol{\tau} = 2^\calX\). Given a topology, we can define some familiar terms:

\begin{definition}[Interior]
	\label{def:interior}
	For a subset \(A \subseteq X\), the interior of  \(A\), denoted \(A^\circ\), is the largest open set included in A (where largest is defined under the usual subset ordering). We can also express this as the union of all open sets contained by \(A\).
	 \[
		 A^\circ = \bigcup\left\{B: B \in \boldsymbol{\tau}, B \subseteq A\right\}
	.\] 
\end{definition}
Note that a set is open if and only if \(A = A^\circ\).

\begin{definition}[Closure]
	\label{def:closure}
	For a subset \(A \subseteq X\), the closure of  \(A\), denoted  \(\bar{A}\), is the smallest closed set the covers A. We can express this as the intersection of all closed sets containing A:
	 \[
		 \bar{A} = \bigcap \left\{B: B^c \in \boldsymbol{\tau}, A \subseteq B\right\}
	.\] 
\end{definition}
By De-Morgan's law and closer of the topology under arbitrary union we can see that this intersection always gives a closed set. A set is closed if and only if \(A = \bar{A}\).

\begin{lemma}[]
	\label{lemma:prelim}
	Suppose \(x \in \bar{A}\), then for every neighborhood of  \(x\),  \(V_x\), we have that  \(V_x \cap A \neq \emptyset\).
\end{lemma}
\begin{proof}
	Let \(x \in \bar{A}\) and suppose for some neighborhood  \(V_x\) of \(x\) we have that  \(V_x \cap A = \emptyset\). Then we know that  \(V_x^\circ \cap A = \emptyset\). Take  \(\tilde A = \bar A \cap (V_x^\circ)^c\). We can verify that this is a smaller closed set that also contains  \(A\).
\end{proof}


\begin{definition}[Boundary]
	\label{def:boundary}
	The boundary of a set \(A\), denoted  \(\delta A\), is  \(\bar{A}\setminus A^\circ\).
\end{definition}

A useful concept when talking about convergence under a topology is that of a neighborhood of a point \(x \in X\).

\begin{definition}[Neighborhood]
	\label{def:neighborhood}
	For a point \(x \in X\) a set  \(V\) is a neighborhood of  \(X\) if  \(x \in V^\circ\).
\end{definition}

We can now use the topology to define limit points and convergence.

\begin{definition}[Limit Point]
	\label{def:limit-point}
	A point \(x \in X\) is a limit point of a set  \(A \subseteq X\) if, for every neighborhood  \(V\) of  \(x\), 
	 \[
		 A \bigcap\left( V\setminus\{x\} \right)\neq \emptyset
	.\] 
	In other words, every neighborhood of \(x\) intersects with  \(A\) at a point other than \(x\). Let \(A'\) be the set of all limit points of  \(A \subseteq X\).
\end{definition}
\begin{lemma}[]
	\label{lemma:prelim2}
	If \(S\) is a subset of  \(X\), then  \(\bar{S} = S \cup S'\).
\end{lemma}
\begin{proof}
	First show that \(\bar{S} \subseteq S \cup S'\). Let \(x \in \bar{S}\). If \(x \in S\) then we are done. Otherwise, suppose \(x \in \bar{S}\setminus S\). This means that for all \(V_x\) we have that \(S \cap V_x = S\cap \left(V_x\setminus\{x\}\right).\) By the result of Lemma~\ref{lemma:prelim}, we have that \(V_x \cap S \neq \emptyset\). So, \(x \in S'\). 

	Now suppose that \(x \in S \cup S'\). Clearly if  \(x \in S\) then \(x\in \bar{S}\). Suppose then that  \(x \in S'\setminus S\) but \(x \not\in \bar{S}\). Let \(\tilde S\) be any closed set containing  \(S\), that is  \(S \subseteq \tilde S\). For sake of contradiction, suppose that  \(x \not\in \tilde S\) (x is a limit point of \(S\) that is not in  \(\tilde S\)). Because \(\tilde S\) is closed we know that  \(\tilde S^c \in \boldsymbol{\tau}\). Further, we know that \(x \in \tilde S^c\) so that  \(\tilde S^c\) is a neighborhood of \(x\). Since \(x\) is a limit point of  \(S\), we know that  \(\tilde S^c \cap S = \tilde S^c \cap S \setminus\{x\} \neq \emptyset\). However, we also know that \(S \subseteq \tilde S\) so we have a contradiction. Therefore, it must be that  \(x \in \bar{S}\) which completes the proof.
\end{proof}


\begin{lemma}[Characterization of Closed Sets]
	\label{lemma:closed}
	A set is closed if and only if it contains all of its limit points.
\end{lemma}
\begin{proof}
	This is a consequence of Lemma~\ref{lemma:prelim2} and the fact that \(A\) is closed if and only if  \(\bar{A} = A\).
\end{proof}


\begin{definition}[Convergence]
	\label{def:convergence}
	We say a sequence \(\left\{x_n\right\}_{n=1}^\infty\) converges to a point \(x \in X\) if for every neighborhood  \(V_x\) of \(x\), there exists a number  \(M\) such that for all  \(m\geq M\), \(x_m \in V_x\). 
\end{definition}

Note that under the trivial topology \(\boldsymbol{\tau} = \left\{\emptyset, X\right\}\) all sequences converge to any point \(x \in X\) whereas under the discrete topology on  \(\SR\),  \(\boldsymbol{\tau} = 2^\SR\), no sequence converges.


\begin{definition}[Continuity]
	\label{def:continuity}
	Let \((\calX, \boldsymbol{\tau}_1)\) and \((\calY, \boldsymbol{\tau}_2)\) be two topological spaces and \(f:\calX\to\calY\). We say  \(f\) is continuous if  \(f^{-1}(A) \in \boldsymbol{\tau}_1\) for all \(A \in \boldsymbol{\tau}_2\). That is, a continuous function maps open sets to open sets. 
\end{definition}

We can now get ready to combine the notions of continuity and convergence coming from a topology with the notions that we are familiar with from metric spaces. First, we need to define the topology generated by a metric. 

\begin{definition}[Generated Topology]
	\label{def:generated}
	Let \(\calA\) be a collection of subsets of  \(X\). The topology generated by  \(\calA\), \(\langle\calA\rangle\) is the smallest topology that contains \(\calA\):
	\[
		\langle\calA\rangle = \bigcap \left\{\boldsymbol\tau: \calA\subseteq\boldsymbol{\tau}\right\}
	.\] 
\end{definition}

We will then define the topology generated by a metric as the topology generated by the collection of open balls \(B(x,\eps)\).

\begin{definition}[Open Ball]
	\label{def:open-ball}
	Let \(d(x,y)\) be a metric on  a vector space  \(X\). For any point  \(x \in X\) define the open ball of size  \(\eps\) around  \(x\) as:
	\[
		B(x,\eps) = \left\{y: d(x,y) \leq \eps\right\}
	.\] 
\end{definition}

In a metric space, we consider the topology generated by all the open balls \(\boldsymbol{\tau}_d = \langle\left\{B(x,\eps):x \in X, \eps > 0\right\}\rangle\). In fact, the set of open balls is a basis for this topology, which means that every open set \(A\) in \(\boldsymbol{\tau}_d\) and any point \(x \in A\), there is an open ball \(B\) such that  \(x \in B \subseteq A\).\footnote{In fact, the set of all open balls with rational \(\eps\) is a basis for the topology}. Many topological properties such as continuity or convergence can be verified by simply confirming the properties for all members of a basis for the topology. This ties together the ``epsilon-delta" notions of continuity and convergence with the more topological versions given above.

For the rest of this subsection we will talk about separability and compactness, but give examples using normed-metric spaces instead of talking in generality about the topology.

\begin{definition}[Dense Subset]
	\label{def:dense}
	A topological space \((X,\boldsymbol{\tau})\) has a dense subset \(\calA\) if  \(\bar{\calA} = X\). Equivalent, by Lemma~\ref{lemma:prelim2}, every point of  \(X\) is either in  \(\calA\) or is a limit point of  \(\calA\).
\end{definition}
Informally, all points in \(X\) are either in \(\calA\) or arbitrarily ``close" to \(\calA\). As an example, in the standard topology on \(\SR\) generated by the metric \(d(x,y) = |x-y|\), the rationals \(\SQ\) are dense. We also have that, for the set of continuous functions under the sup norm, the set of all polynomials is dense, which means that we can approximate a function arbitrarily well with them.

\begin{definition}[Seperable Space]
	\label{def:seperable}
	We say that a topological space \((X,\boldsymbol{\tau})\) is separable if it has a countable dense subset.
\end{definition}
As we went over above, the real line with its standard topology is separable. The \(L_p[a,b]\) spaces are also generally separable for  \(1 \leq p \leq \infty\). However \(L_\infty\) is not separable, which will cause issues (this is not the example below).


 \begin{example}[Continuous functions with the sup norm is not seperable]
	\label{ex:notseperable}
	Let \(\{f_i\}_{i\in\SN}\) be a countable set of functions on \(C_\infty[a,b]\). Let  \(\{q_i\}_{i\in\SN}\) be some counting of the rational numbers between a and b. Let \(\tilde f\) be some function that is equal to 0 except on the rational numbers. For each rational number  \(q_i\) define 
	 \[
		 \tilde{f}(q_i) = \begin{cases}
			 1 & \text{if }f_i(q_i) \leq 0 \\
			 -1 & \text{if }f_i(q_i) > 0
	    \end{cases}
	.\] 
	We can see that \(\tilde{f}\) is bounded (and integrates to 0), but it is at least distance one from each function in \(\{f_i\}_{i\in\SN}\).
\end{example}

Initially I thought this example would work for \(L_\infty[a,b]\), but this only forces a difference on a set of measure 0 and I believe \(L_\infty\) works with an essential supremum norm.

Another important/useful concept is that of compactness. The general notion is given below:

\begin{definition}[Compact Set]
	\label{def:compact}
	A set \(A\) is compact if for every collection of open sets  \(\{G_i\}\) such that \(A\subset \bigcup G_i \), there is a finite subcollection that also covers \(A\).
\end{definition}
\begin{example}[]
	\label{ex:reals}
	The real-line is not compact. Consider the open cover \(\left\{(n,n+1)|n\in\SZ\right\} \)
\end{example}
\begin{example}[]
	\label{ex:halfopen}
	The interval \((0,1]\) is not compact. Consider the open cover  \(\left\{(1/n, 1+1/n)| n\in \SN \right\}\)
\end{example}
\begin{theorem}[Heine-Borel]
	\label{thm:heine-borel}
	For a subset \(S\) of the Euclidean Space\footnote{That is the space \(\SR^n\) equipped by the topology generated by the standard distance metric}, \(\SR^n\), the following statements are equivalent:
	 \begin{itemize}
		\item \(S\) is closed and bounded
		\item  \(S\) is compact
	\end{itemize}
\end{theorem}
Compactness is nice because of various extreme value theorems that ensure that a supremum or infimum is attained. Heine-Borel gives a nice way of characterizing compactness for Euclidean Spaces, but in general there is no equivalent result for general metric spaces. We have to strengthen the boundedness assumption.

\begin{definition}[Totally Bounded]
	\label{def:totally-bounded}
	A set \(\calA\) is totally bounded if for each  \(\eps> 0\) there exists a finite sequence  \(\{a_1,\dots,a_n\}\) such that for \(B_i = \left\{a\in\calA: \left\|a-a_i\right\|\leq \eps\right\}\), \(\bigcup_{i=1}^N B_i\) covers  \(A\).	
\end{definition}

\textbf{Intuition:} For any precision \(\eps\), you can find a finite set of points that describe  \(\calA\) arbitrarily well. (much more demanding in infinite dimensions than just bounded).

\begin{theorem}[]
	In a complete metric space, the following are equivalent:
	\begin{itemize}
		\item \(\calA\) is a compact subset
		\item \(\calA\) is closed and totally bounded 
 		\item Every sequence in \(\calA\) has a convergent subsequence which converges to a point in  \(\calA\).
	\end{itemize}
\end{theorem}

For a compact set \(T\), let  \(C(T)\) be the set of continuous functions from  \(T\) to  \(\SR\) equipped with the sup norm. We may want to characterize when a subset \(K\) of  \(C(T)\) is compact. 

\begin{definition}[Equicontinuous]
	\label{def:equicontinuous}
	A set of functions \(K \subseteq C(T)\) is equicontinuous if for every  \(t_0 \in T\) and  \(\eps > 0\) there is a  \(\delta > 0\) such that  \(|f(t)-f(t_0)|<\eps\) whenever  \(\|t-t_0\|<\delta\) \textbf{for all} \(f\in K\).
\end{definition}
This is a bit like to uniformly continuity but adapted a bit to deal with a function space. 
\begin{theorem}[Arzela-Ascoli]
	\label{thm:aa}
	If  \(T\) is compact, then  \(K \subseteq C(T)\) is compact (under the sup-norm) if and only if  \(K\) is bounded and equicontinuous.
\end{theorem}

This concludes our discussion of topology and continuity. We now review measurability.

\subsection{Probability Spaces and Outer Measure}%
\label{sec:probability}
\begin{definition}[Sigma Algebra]
	\label{def:sigma-algebra}
	A collection of subsets \(\calF\) is a sigma-algebra (or sigma-field) if it contains the whole set and is closed under complement and under countable union.
\end{definition}

\begin{definition}[Borel Sigma Algebra]
	\label{def:borel}
	For any collection of sets \(\calA\), we call the smallest sigma algebra containing \(\calA\), \(\sigma(\calA)\), the sigma algebra generated by \(\calA\). The Borel sigma algebra  on a topological space is the sigma algebra generated by all the open sets, \(\calB(X) = \sigma(\boldsymbol{\tau})\).
\end{definition}

The Borel sigma algebra is useful as it makes all continuous functions measurable (defined below).

\begin{definition}[Probability Space]
	\label{def:prob-space}
	A probability space is a triple \((\Omega, \calF, \P)\) consisting of a set of elements \(\Omega\), a sigma algebra on  \(\Omega\),  \(\calF\), and a probability measure  \(\P:\calF \to [0,1]\) satisfying:
	 \begin{enumerate}
		 \item \(\P(A) \geq \P(\emptyset) = 0\) [Non-negativity]
		 \item If \(A_i \in \calF\) is a countable sequence of disjoint sets then  \(\P\left(\bigcup_i A_i\right) = \sum_{i} \P(A_i)\) 
		 \item \(\P(\Omega) = 1\).
	\end{enumerate}
\end{definition}

A measurable function between two spaces equipped with sigma algebra's is simply one that maps measurable sets to measurable sets, similar to the definition of a continuous function. 

\begin{definition}[Measurable Map]
	A function  \(f:(\calX, \calA) \to (\calY, \calB)\) is measurable if  \(f^{-1}(B)\in\calA\) for all  \(B \in \calB\)	
\end{definition}

Given this, we can abstractly think about a random variable as a measurable map from a probability space into another measurable space (typically the real-line). Measurability ensures that things like expectations and probabilities of random variables are well defined.

However, measurability becomes a problem when we are dealing with random functions. For example, if \(X\) is a map from a probability space to  \(L_\infty[a,b]\), the Borel-sigma algebra on  \(L_\infty[a,b]\) is quite large (its not separable). This means that measurable sets in  \(L_\infty[a,b]\) may not map back to measurable sets on the probability space \(\Omega, \calF, \P\). 

This is a problem because \(L_\infty\) is typically a useful space to work in for empirical process theory. So we have to find a way to relax measurability. This means that we work with outer expectations and probabilities:
\begin{definition}[Outer Measure and Inner Measure]
	Let \((\Omega,\calF,\P)\) be a probability space \(T:\Omega \to \SR\). Define the outer expectation:
	 \[
		 \E^\star[T] = \inf\left\{\E[U]: T\leq U, U\text{ is measurable}\right\}
	.\]
	and the inner expectation:
	\[
		\E_\star[T] = \sup\left\{\E[U]: U\leq T, U\text{ is measurable}\right\}
	.\] 
\end{definition}
We can use this to define inner and outer probability measures by restricting \(T\) to be the indicator function for an arbitrary set  \(B\). Inner and outer expectations are generally nicely behaved but they require modified versions of dominated and monotone convergence and Fubini's theorem breaks down.

\section{Weak Convergence}%
\label{sec:weak-convergence}

We can now talk about weak convergence of random variables. Let \(X_n\) be a real-valued random variable with cdf  \(F_n(t)\) and let  \(X\) be a random variable with cdf  \(F(t)\). The typical definition of weak convergence is that \(X_n \overset{L}{\to} X\) if  \(F_n(t) \to F(t)\) pointwise at all continuity points of  \(F\). This is not super general for non-real valued random maps.

\begin{theorem}[Portmanteau]
	\label{thm:portmanteau}
	For real random variables \(X_n\overset{L}{\to}X\) is equivalent to:
	 \begin{itemize}
		 \item \(\E\left[g(X_n)\right] \to \E[g(X)]\) for all bounded continuous functions. 
		 \item For all open sets \(G\),  \(\lim\inf \P(X_n\in G) \geq P(X\in G)\).
		 \item For all closed sets \(K\),  \(\lim\sup \P(X_n \in K) \leq \P(X \in K)\).
	\end{itemize}
\end{theorem}

This motivates the theory of weak convergence for general metric spaces. Let \(\mathbb{D}\) be a complete metric space with metric  \(d\). We can equip \(\mathbb{D}\) with it's Borel-sigma algebra as defined in Definition~\ref{def:borel} and a tight probability measure as defined in Definition~\ref{def:tight}. Let  \(C_b\left(\mathbb{D}\right)\) be the set of all continuous and bounded real functions on \(\mathbb{D}\). If \(X\) is a random variable,  \(X:(\Omega,\calF,\P) \to \mathbb{D}\) then it's law is given \(L = \P\circ X^{-1}\).


\begin{definition}[Tight Probability Measure]
	\label{def:tight}
	A probability measure is tight if for every \(\eps > 0\) there is a compact set  \(K_\eps\) such that  \(P(K_\eps) \geq  1-\eps\)
\end{definition}
This is a generalization of bounded in probability I believe. 
\begin{definition}[Borel Law]
	\label{def:borel-law}
	For a random variable \(X\), we say that  \(X\) has a Borel Law  \(L\) if
	 \[
		 \P\left(X\in A\right) = \int_A dL
	.\] 
	for all Borel sets \(A\). 
\end{definition}
Given this setup, we can now define weak convergence:
\begin{definition}[Weak Convergence]
	\label{def:wcov}
	Let \((\Omega_n, \calF_n,\P_n)\) be a sequence of probability spaces and  \(X_n:\Omega_n \to \mathbb{D}\). Then we say that \(X_n\overset{L}{\to}X\) if:
	 \[
		 \E^\star\left[f(X_n)\right]\to \E[f(X)]
	.\] 
	for every \(f \in C_b(\mathbb{D})\)
\end{definition}

We can characterize this convergence using another Portmanteau theorem. 
\begin{theorem}[Portmanteau]
	\label{thm:portmanteau2}
	The following are equivalent:
	\begin{enumerate}
		\item \(X_n \overset{L}{\to} X\)
		\item \(\lim\inf \P_\star(X_n \in G) \geq \P(X \in G)\) for all open sets \(G\).
		\item \(\lim\sup \P^\star(X_n \in F) \leq \P(X \in F)\) for every closed set \(F\).
		\item \(\lim P(X_n \in B) = P(X \in B)\) for every Borel set  \(B\) with  \(P(X \in \delta B) = 0\).
	\end{enumerate}
\end{theorem}
\textbf{Question:} Is \(X\) supposed to have a Borel Law? Otherwise where do open and closed sets get tied into this? Is it from the notion of convergence? 

\end{document}
